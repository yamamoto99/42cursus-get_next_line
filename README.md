<h1 align="center">
 42Cursus Get Next Line
</h1>

<p align="center">
  <img src="get_next_linee.png" alt="ready to help"/>
</p>

# Key Points

## 静的変数
静的変数とは、プログラム開始時にメモリ上に領域を確保し、プログラム終了まで同じ領域を利用し続ける変数</br>
プログラム内で特定の関数などから共有され、値を保持し、再利用が可能</br>
関数を抜けても値がリセットされることなく、呼び出しのたびに前回の値を引き継ぐことが可能
静的変数を宣言するときは、`static`修飾子を付けて宣言する
## 動的変数
一般的に、関数内で宣言されるローカル変数は「動的変数（自動変数）」として扱われる</br>
動的変数は関数が呼び出されるたびに作成され、関数終了時に破棄されるため、次の関数呼び出しでは値がリセットされる
## static指定子
`static`(訳：静的な)</br>
`static`は記憶クラス指定子の一つで、変数や関数の宣言の前につけて使用する</br>
1. 関数に対して`static`をつける場合</br>
スコープが「同一ソースファイル内」に限定され、外部ファイルから呼び出せなくなる
2. 変数に対して`static`をつける場合</br>
スコープが「同一ソースファイル内、同一関数内」に限定され、外部ファイル、外部関数から呼び出せなくなる</br>
一度初期化された値が関数呼び出しの間で保持され、次回呼び出し時に前回の値を引き継ぐ</br>

サンプルコード
```c
#include <stdio.h>

void	print_nbr(void)
{
	static int	s_nbr = 0;
	int			nbr;

	nbr = 0;
	printf("s_nbr : %d\n", s_nbr);
	printf("nbr   : %d\n", nbr);
	printf("------------\n");
	s_nbr++;
	nbr++;
}

int	main(void)
{
	printf("▽--result--▽\n");
	print_nbr();
	print_nbr();
	print_nbr();
}
```
▽実行結果▽
```shell
▽--result--▽
s_nbr : 0
nbr   : 0
------------
s_nbr : 1
nbr   : 0
------------
s_nbr : 2
nbr   : 0
------------
```
| 属性             | 説明                                          |
|-----------------|-----------------------------------------------|
| スコープ(有効範囲) | 宣言されたブロックまたはソースファイル内でのみアクセスが可能 |
| ライフタイム(寿命) | プログラム実行期間中ずっとメモリ上に存在し続け、値を保持し続ける |

## 記憶クラス指定子
記憶クラス指定子とは変数をどこに記憶するのかを明示的に指定するもの
`const`などの型修飾子とは別物であり、変数や関数のメモリ割り当てと寿命を制御するための指定子である
| 指定子         | 説明                                                                                                         |
|---------------|-------------------------------------------------------------------------------------------------------------|
| auto          | ローカル変数の指定子。通常は省略可能                                                                              |
| register      | レジスタ変数として割り当て ※現在はほぼ利用されない                                                                  |
| static        | 静的変数と静的関数を宣言する</br>静的変数はメモリに保持され、初期化された値を保持し続ける。<br>外部ファイルからのアクセスは不可 |
| extern        | 外部変数と外部関数を宣言する                                                                                     |
| typedef       | 新しい型の別名を作成                                                                                            |

※ extern指定子
`extern`は複数のソースファイル間で同じグローバル変数を共有する場合などに利用する</br>
これにより、変数や関数が別ファイルで定義されていることをコンパイラに伝える</br>
通常は、`.h`ファイルなどで`extern`を使って変数や関数の「宣言」を行い、いずれかの`.c`ファイルで「定義」行う</br>

サンプルコード
```c
/* header.hなどのヘッダーファイル */
extern int a;

/* main.cなどのソースファイル*/
int a = 1000;
```

## ファイルディスクリプタ
ファイルディスクリプタとは、0から始まる整数の識別子</br>
プログラムがアクセスするファイルや標準入力などをOSが識別するために用いられる</br>
通常、0が標準入力、1が標準出力、2が標準エラー出力に割り当てられているため、プログラムがファイルを開くと3から順番に割り当てられる</br>

## malloc
`malloc`とは動的にメモリを確保する関数</br>
引数で指定するバイト数分のメモリを確保し、確保したメモリ領域へのポインタを返却する</br>
`malloc`で確保された領域は初期化されておらず、データの残骸が入っている可能性がある</br>
基本的にmallocではピープ領域にメモリを確保する</br>

## stack領域とheap領域の違い
1. スタック領域とは</br>
関数の呼び出し時に自動的に割り当てられ、関数の修了とともに自動的に解放される領域</br>
スタック領域は後入れ先だし(LIFO)のデータ構造を持つ</br>
関数内で定義された変数や、引数として受け取ったパラメータは、その関数の実行中のみ使用されるため、LIFOのデータ構造とすることで、効率よくメモリを使用することができる</br>

2. ヒープ領域とは</br>
プログラマが明示的にメモリの確保(malloc)と解放(free)を行う必要がある</br>
どのような順序で確保・解放するかは、ソフトウェア側で自由にきめられるため、柔軟性が高い</br>
設計ミスがあるとメモリリークなどの危険性がある</br>

## 構造体を用いる理由
C言語では可変長文字列を取り扱う際、`malloc`などの動的なメモリ確保が必要となる</br>
もし、現在確保している領域が足りなくなり、新たにメモリを確保したくなった場合「今何文字か」「今何バイト確保しているか」をその都度調べるより、構造体として初めから所持していると管理が楽になる</br>
